<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Guia Cabo Frio 2025</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #007AFF;
            --bg: #F2F2F7;
            --card-bg: #FFFFFF;
            --text-main: #1C1C1E;
            --text-sec: #8E8E93;
            --separator: #C6C6C8;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Impede scroll na pagina inteira, apenas nas areas certas */
        }

        /* --- HEADER --- */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--separator);
            padding: 12px 16px;
            z-index: 1000;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .app-title h1 { font-size: 1.1rem; font-weight: 800; letter-spacing: -0.5px; }
        .app-title span { font-size: 0.75rem; color: var(--text-sec); display: block; }
        
        .roteiro-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,122,255,0.3);
            transition: transform 0.1s;
        }
        .roteiro-btn:active { transform: scale(0.95); }

        /* --- FILTROS (Scroll Horizontal) --- */
        .filters-container {
            background: var(--bg);
            padding: 10px 16px;
            overflow-x: auto;
            white-space: nowrap;
            flex-shrink: 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            /* Hide scrollbar */
            -ms-overflow-style: none; scrollbar-width: none;
        }
        .filters-container::-webkit-scrollbar { display: none; }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: white;
            border: 1px solid #D1D1D6;
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-main);
            margin-right: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .chip.active {
            background: var(--text-main);
            color: white;
            border-color: var(--text-main);
            font-weight: 600;
        }
        .chip i { font-size: 0.9rem; }

        /* --- √ÅREA PRINCIPAL (Split View) --- */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* Coluna da Lista */
        .list-view {
            width: 450px;
            overflow-y: auto;
            background: var(--bg);
            padding: 16px;
            border-right: 1px solid var(--separator);
            z-index: 10;
        }

        /* O Mapa */
        .map-view {
            flex: 1;
            background: #e5e3df;
            position: relative;
            z-index: 1;
        }
        #map { width: 100%; height: 100%; }

        /* --- CARDS --- */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            cursor: pointer;
            transition: background 0.2s;
            border: 1px solid rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .card:hover { background: #fafafa; }
        .card:active { transform: scale(0.99); }

        .card-header { display: flex; justify-content: space-between; align-items: start; }
        .card-title { font-weight: 700; font-size: 1rem; color: #000; line-height: 1.2; }
        .card-cat { font-size: 0.7rem; text-transform: uppercase; color: var(--text-sec); font-weight: 600; letter-spacing: 0.5px; }
        
        .card-info { display: flex; gap: 12px; font-size: 0.8rem; color: var(--text-sec); margin-top: 4px; }
        .info-tag { display: flex; align-items: center; gap: 4px; }
        
        .rating-badge { 
            background: #FFF9E6; color: #F5A623; 
            padding: 2px 6px; border-radius: 4px; 
            font-weight: 700; font-size: 0.75rem; 
        }

        .action-link {
            text-decoration: none;
            color: var(--primary);
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 8px;
            display: inline-block;
        }

        /* Estilo Timeline (Roteiro) */
        .timeline-card {
            border-left: 4px solid var(--primary);
            background: #F0F9FF;
        }
        .day-label {
            background: var(--primary); color: white;
            display: inline-block; padding: 4px 8px;
            border-radius: 4px; font-size: 0.7rem; font-weight: 700;
            text-transform: uppercase; margin-bottom: 5px;
        }

        /* --- RESPONSIVIDADE (MOBILE) --- */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            .list-view {
                width: 100%;
                height: 55%; /* Lista ocupa 55% da tela */
                order: 2; /* Lista fica embaixo */
                border-right: none;
                border-top: 1px solid var(--separator);
                padding-bottom: 40px; /* Espa√ßo extra scroll */
            }
            .map-view {
                height: 45%; /* Mapa ocupa 45% da tela */
                order: 1; /* Mapa fica em cima */
            }
        }
        
        /* Ajuste para marcadores customizados */
        .custom-div-icon {
            background: transparent;
            border: none;
        }
        .marker-pin {
            width: 30px;
            height: 30px;
            border-radius: 50% 50% 50% 0;
            background: var(--primary);
            position: absolute;
            transform: rotate(-45deg);
            left: 50%;
            top: 50%;
            margin: -15px 0 0 -15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .marker-pin::after {
            content: '';
            width: 14px;
            height: 14px;
            margin: 8px 0 0 8px;
            background: #fff;
            position: absolute;
            border-radius: 50%;
        }
        .marker-icon {
            position: absolute;
            width: 22px;
            font-size: 14px;
            left: 0;
            right: 0;
            margin: 8px auto;
            text-align: center;
            color: var(--text-main);
            z-index: 100;
            transform: rotate(45deg); /* Compensa a rota√ß√£o do pin */
        }
    </style>
</head>
<body>

<header>
    <div class="app-title">
        <h1>Cabo Frio 2025</h1>
        <span>Condom√≠nio dos P√°ssaros</span>
    </div>
    <button class="roteiro-btn" onclick="filterData('roteiro')">
        <i class="far fa-calendar-alt"></i> Ver Roteiro
    </button>
</header>

<div class="filters-container">
    <div class="chip active" onclick="filterData('all', this)"><i class="fas fa-layer-group"></i> Tudo</div>
    <div class="chip" onclick="filterData('praias', this)"><i class="fas fa-umbrella-beach"></i> Praias</div>
    <div class="chip" onclick="filterData('gastronomia', this)"><i class="fas fa-utensils"></i> Comer</div>
    <div class="chip" onclick="filterData('noite', this)"><i class="fas fa-cocktail"></i> Noite</div>
    <div class="chip" onclick="filterData('servicos', this)"><i class="fas fa-shopping-cart"></i> Mercados/P√£o</div>
    <div class="chip" onclick="filterData('fitness', this)"><i class="fas fa-dumbbell"></i> Fitness</div>
    <div class="chip" onclick="filterData('saude', this)"><i class="fas fa-heartbeat"></i> Farm√°cia</div>
    <div class="chip" onclick="filterData('lazer', this)"><i class="fas fa-camera"></i> Lazer/Fotos</div>
</div>

<div class="main-content">
    
    <div class="map-view">
        <div id="map"></div>
    </div>

    <div class="list-view" id="cards-container">
        </div>
    
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    /* --- CONFIGURA√á√ÉO --- */
    // Coordenadas corrigidas para Estrada do Guriri (Entrada Cond. P√°ssaros)
    const HOME_COORDS = [-22.8475, -41.9980]; 

    /* --- BASE DE DADOS EXTENSA (SIMULA√á√ÉO JSON REAL) --- */
    const db = [
        // === ROTEIRO ===
        { id: 'r1', cat: 'roteiro', title: 'Chegada & Relax', day: '29/12 ‚Ä¢ DOM', desc: 'Foco no Per√≥ e Compras B√°sicas.', lat: -22.8688, lng: -41.9855 },
        { id: 'r2', cat: 'roteiro', title: 'B√∫zios Experience', day: '30/12 ‚Ä¢ SEG', desc: 'Gerib√° cedo + P√¥r do Sol no Porto.', lat: -22.7758, lng: -41.9056 },
        { id: 'r3', cat: 'roteiro', title: 'Log√≠stica R√©veillon', day: '31/12 ‚Ä¢ TER', desc: 'Ilha do Japon√™s de manh√£. Zero carro a noite.', lat: -22.8732, lng: -41.9987 },
        { id: 'r4', cat: 'roteiro', title: 'Detox P√≥s-Festa', day: '01/01 ‚Ä¢ QUA', desc: 'Praia das Conchas e Centro Hist√≥rico.', lat: -22.8715, lng: -41.9820 },
        { id: 'r5', cat: 'roteiro', title: 'Cultura & Despedida', day: '02/01 ‚Ä¢ QUI', desc: 'Forte S√£o Mateus e Rua dos Biqu√≠nis.', lat: -22.8824, lng: -42.0097 },

        // === PRAIAS (20 op√ß√µes variadas na regi√£o) ===
        { cat: 'praias', title: 'Praia do Per√≥', rating: '4.8', desc: 'Bandeira Azul. A mais limpa e pr√≥xima.', lat: -22.8688, lng: -41.9855 },
        { cat: 'praias', title: 'Ilha do Japon√™s', rating: '4.7', desc: '√Åguas rasas. V√° de barco-t√°xi.', lat: -22.8732, lng: -41.9987 },
        { cat: 'praias', title: 'Praia das Conchas', rating: '4.8', desc: 'Ao lado do Per√≥. Mar piscininha.', lat: -22.8715, lng: -41.9820 },
        { cat: 'praias', title: 'Praia do Forte', rating: '4.9', desc: 'A principal. Areia branca, muito cheia.', lat: -22.8920, lng: -42.0150 },
        { cat: 'praias', title: 'Praia das Dunas', rating: '4.6', desc: 'Continua√ß√£o do Forte, menos gente, ondas fortes.', lat: -22.8950, lng: -42.0250 },
        { cat: 'praias', title: 'Praia do Foguete', rating: '4.5', desc: 'Mar aberto, √°gua fria, √≥timo visual.', lat: -22.9100, lng: -42.0300 },
        { cat: 'praias', title: 'Gerib√° (B√∫zios)', rating: '4.9', desc: 'Badala√ß√£o jovem e surf.', lat: -22.7758, lng: -41.9056 },
        { cat: 'praias', title: 'Ferradurinha (B√∫zios)', rating: '4.8', desc: 'Pequena e linda. Aluguel de Caiaque.', lat: -22.7830, lng: -41.9100 },
        { cat: 'praias', title: 'Azeda/Azedinha (B√∫zios)', rating: '4.7', desc: 'Acesso por escadaria. Visual incr√≠vel.', lat: -22.7450, lng: -41.8850 },
        { cat: 'praias', title: 'Jo√£o Fernandes (B√∫zios)', rating: '4.7', desc: 'Muitos peixes. √ìtima estrutura.', lat: -22.7380, lng: -41.8780 },
        { cat: 'praias', title: 'Prainhas do Pontal (Arraial)', rating: '5.0', desc: 'Escadaria famosa. Chegue 6h da manh√£.', lat: -22.9765, lng: -42.0245 },
        { cat: 'praias', title: 'Praia do Forno (Arraial)', rating: '4.9', desc: 'Trilha moderada. Visual caribenho.', lat: -22.9650, lng: -42.0100 },

        // === GASTRONOMIA (Mix de pre√ßos) ===
        { cat: 'gastronomia', title: 'Box 60', rating: '$$', desc: 'Container. Burger/Pizza. Perto de casa.', lat: -22.8650, lng: -41.9900 },
        { cat: 'gastronomia', title: 'Picolino', rating: '$$$$', desc: 'O melhor restaurante da cidade. No canal.', lat: -22.8835, lng: -42.0211 },
        { cat: 'gastronomia', title: 'Gal√°pagos', rating: '$$$', desc: 'Na Passagem. Moqueca incr√≠vel.', lat: -22.8856, lng: -42.0165 },
        { cat: 'gastronomia', title: 'Arcos do Canal', rating: '$$$', desc: 'Vista linda do canal. Rom√¢ntico.', lat: -22.8850, lng: -42.0170 },
        { cat: 'gastronomia', title: 'Sem Frescura', rating: '$$', desc: 'Burger artesanal top no centro.', lat: -22.8800, lng: -42.0220 },
        { cat: 'gastronomia', title: 'Restaurante do Z√©', rating: '$$$', desc: 'Frutos do mar tradicional na orla.', lat: -22.8900, lng: -42.0140 },
        { cat: 'gastronomia', title: 'Chez Michou (B√∫zios)', rating: '$$', desc: 'Crepe lend√°rio. Agito.', lat: -22.7547, lng: -41.8879 },
        { cat: 'gastronomia', title: 'Bar do Z√© (B√∫zios)', rating: '$$$$', desc: 'Jantar sofisticado na Orla Bardot.', lat: -22.7530, lng: -41.8850 },
        { cat: 'gastronomia', title: 'Porto da Barra (B√∫zios)', rating: '$$$', desc: 'Polo gastron√¥mico no cais. P√¥r do sol.', lat: -22.7720, lng: -41.9200 },
        { cat: 'gastronomia', title: 'McDonalds Cabo Frio', rating: '$', desc: 'Salvador da madrugada.', lat: -22.8790, lng: -42.0250 },

        // === SERVI√áOS & PADARIAS ===
        { cat: 'servicos', title: 'Supermercado do Per√≥', rating: '07h-22h', desc: 'Mercado grande mais pr√≥ximo.', lat: -22.8631, lng: -41.9890 },
        { cat: 'servicos', title: 'Padaria Remmar', rating: '06h-21h', desc: 'Tradicional. √ìtimo p√£o franc√™s.', lat: -22.8800, lng: -42.0210 },
        { cat: 'servicos', title: 'Padaria do Per√≥', rating: '06h-20h', desc: 'Simples, mas resolve o caf√© da manh√£.', lat: -22.8650, lng: -41.9880 },
        { cat: 'servicos', title: 'Assa√≠ Atacadista', rating: 'Atacado', desc: 'Para compras grandes do grupo.', lat: -22.8750, lng: -42.0300 },
        { cat: 'servicos', title: 'Shopping Park Lagos', rating: 'Shopping', desc: 'Cinema, lojas e ar condicionado.', lat: -22.8780, lng: -42.0350 },

        // === FITNESS ===
        { cat: 'fitness', title: 'Smart Fit Centro', rating: 'GymPass', desc: 'Grande. Aceita Black.', lat: -22.8800, lng: -42.0200 },
        { cat: 'fitness', title: 'Arena CF Beach Tennis', rating: 'R$ 40', desc: 'Quadras de areia para alugar.', lat: -22.8920, lng: -42.0150 },
        { cat: 'fitness', title: 'Academia do Canal', rating: '$$', desc: 'Visual top enquanto treina.', lat: -22.8840, lng: -42.0200 },
        { cat: 'fitness', title: 'Cal√ßad√£o do Per√≥', rating: 'Gr√°tis', desc: '√ìtimo para correr de manh√£.', lat: -22.8690, lng: -41.9860 },

        // === SA√öDE (FARM√ÅCIAS) ===
        { cat: 'saude', title: 'Drogaria Raia', rating: '24h', desc: 'No centro, perto do canal.', lat: -22.8820, lng: -42.0220 },
        { cat: 'saude', title: 'Farm√°cia do Per√≥', rating: '08h-22h', desc: 'Pequena, mas perto de casa.', lat: -22.8640, lng: -41.9895 },
        { cat: 'saude', title: 'Hospital Santa Izabel', rating: 'Emerg√™ncia', desc: 'Principal hospital privado.', lat: -22.8810, lng: -42.0190 },

        // === LAZER & CULTURA ===
        { cat: 'lazer', title: 'Forte S√£o Mateus', rating: 'Hist√≥ria', desc: 'Cart√£o postal. Fotos cl√°ssicas.', lat: -22.8824, lng: -42.0097 },
        { cat: 'lazer', title: 'Morro da Guia', rating: 'Mirante', desc: 'P√¥r do sol 360 graus.', lat: -22.8850, lng: -42.0230 },
        { cat: 'lazer', title: 'Rua dos Biqu√≠nis', rating: 'Compras', desc: 'Para√≠so da moda praia.', lat: -22.8760, lng: -42.0120 },
        { cat: 'lazer', title: 'Bairro da Passagem', rating: 'Passeio', desc: 'Becos hist√≥ricos e arquitetura.', lat: -22.8856, lng: -42.0165 }
    ];

    /* --- INICIALIZA√á√ÉO DO MAPA --- */
    const map = L.map('map', {
        zoomControl: false, 
        tap: true // Corre√ß√£o para mobile
    }).setView(HOME_COORDS, 13);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; OpenStreetMap',
        maxZoom: 19
    }).addTo(map);

    // Marcador da CASA
    const homeIcon = L.divIcon({
        className: 'custom-div-icon',
        html: `<div style='background-color:#000; width:36px; height:36px; border-radius:50%; display:flex; justify-content:center; align-items:center; border:2px solid white; box-shadow:0 2px 10px rgba(0,0,0,0.3);'><i class="fas fa-home" style="color:white; font-size:18px;"></i></div>`,
        iconSize: [36, 36],
        iconAnchor: [18, 18]
    });
    L.marker(HOME_COORDS, {icon: homeIcon}).addTo(map).bindPopup("<b>üè° Base: Cond. P√°ssaros</b>");

    let currentMarkers = [];

    /* --- FUN√á√ÉO DE √çCONES POR CATEGORIA --- */
    function getIcon(category) {
        let color = '#007AFF';
        let icon = 'fa-map-marker-alt';

        if(category === 'praias') { color = '#34C759'; icon = 'fa-umbrella-beach'; }
        if(category === 'gastronomia') { color = '#FF9500'; icon = 'fa-utensils'; }
        if(category === 'noite') { color = '#5856D6'; icon = 'fa-cocktail'; }
        if(category === 'servicos') { color = '#AF52DE'; icon = 'fa-shopping-cart'; }
        if(category === 'fitness') { color = '#FF2D55'; icon = 'fa-dumbbell'; }
        if(category === 'saude') { color = '#FF3B30'; icon = 'fa-plus'; }
        if(category === 'roteiro') { color = '#000000'; icon = 'fa-calendar-day'; }

        return L.divIcon({
            className: 'custom-div-icon',
            html: `<div class="marker-pin" style="background:${color}"><i class="fas ${icon} marker-icon"></i></div>`,
            iconSize: [30, 42],
            iconAnchor: [15, 42],
            popupAnchor: [0, -35]
        });
    }

    /* --- RENDERIZA√á√ÉO --- */
    function filterData(filter, element) {
        // UI Update (Chips)
        if(element) {
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            element.classList.add('active');
        }

        const container = document.getElementById('cards-container');
        container.scrollTop = 0;
        container.innerHTML = '';

        // Remove markers antigos
        currentMarkers.forEach(m => map.removeLayer(m));
        currentMarkers = [];

        // Filtra dados
        const items = filter === 'all' 
            ? db.filter(i => i.cat !== 'roteiro') 
            : db.filter(i => i.cat === filter);

        if(items.length === 0) {
            container.innerHTML = '<div style="padding:20px; text-align:center; color:#999">Nenhum local encontrado nesta categoria.</div>';
            return;
        }

        // Gera Lista e Marcadores
        items.forEach(item => {
            // HTML do Card
            const card = document.createElement('div');
            card.className = item.cat === 'roteiro' ? 'card timeline-card' : 'card';
            
            const roteiroTag = item.cat === 'roteiro' ? `<span class="day-label">${item.day}</span>` : '';
            const ratingHtml = item.cat !== 'roteiro' ? `<span class="rating-badge">‚≠ê ${item.rating}</span>` : '';

            card.innerHTML = `
                ${roteiroTag}
                <div class="card-header">
                    <div class="card-title">${item.title}</div>
                    ${ratingHtml}
                </div>
                <div class="card-cat">${item.cat.toUpperCase()}</div>
                <div class="card-info">${item.desc}</div>
                <a href="https://www.google.com/maps/dir/?api=1&destination=${item.lat},${item.lng}" target="_blank" class="action-link">
                    <i class="fas fa-location-arrow"></i> Ir Agora
                </a>
            `;

            // Clique no card move o mapa
            card.onclick = (e) => {
                // Se clicar no link, n√£o move o mapa (deixa abrir o google)
                if(e.target.tagName === 'A' || e.target.parentElement.tagName === 'A') return;
                
                map.flyTo([item.lat, item.lng], 15);
                
                // No mobile, da um feedback visual
                if(window.innerWidth < 768) {
                   card.style.background = '#eef';
                   setTimeout(() => card.style.background = '', 300);
                }
            };

            container.appendChild(card);

            // Adiciona Marcador
            const marker = L.marker([item.lat, item.lng], {icon: getIcon(item.cat)})
                .addTo(map)
                .bindPopup(`<b>${item.title}</b><br>${item.desc}`);
            currentMarkers.push(marker);
        });

        // Ajuste de Zoom para caber todos os pontos
        if(currentMarkers.length > 0) {
            const group = new L.featureGroup(currentMarkers);
            map.fitBounds(group.getBounds(), {padding: [50, 50]});
        }
    }

    // Inicializa com "Roteiro" se for a primeira vez, ou "All"
    filterData('roteiro'); 

</script>
</body>
</html>