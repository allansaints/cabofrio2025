<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roteiro Costa do Sol 2025</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.4);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            --primary-blue: #007AFF; /* iOS Blue */
            --accent-green: #34C759; /* iOS Green */
            --accent-orange: #FF9500; /* iOS Orange */
            --text-main: #1C1C1E;
            --text-sec: #8E8E93;
            --card-radius: 18px;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f2f2f7;
            color: var(--text-main);
            overflow: hidden; /* Vital para o layout split */
            height: 100dvh; /* Dynamic Viewport Height */
            width: 100vw;
        }

        /* Mesh Gradient Background Animation */
        .mesh-background {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-size: 200% 200%;
            animation: meshAnimate 15s ease infinite;
        }

        @keyframes meshAnimate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- LAYOUT STRUCTURE --- */
        .app-container {
            display: flex;
            height: 100%;
            width: 100%;
        }

        /* Sidebar / Bottom Sheet Area */
        .content-area {
            width: 420px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-right: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            box-shadow: var(--glass-shadow);
            flex-shrink: 0;
        }

        /* Map Area */
        .map-area {
            flex-grow: 1;
            position: relative;
            z-index: 1;
        }

        #map {
            width: 100%;
            height: 100%;
            background: #e5e5f7; /* Placeholder color */
        }

        /* --- UI COMPONENTS --- */
        
        /* Header */
        .header {
            padding: 20px 20px 10px 20px;
            background: transparent;
        }

        .header h1 {
            font-size: 22px;
            font-weight: 700;
            margin: 0 0 10px 0;
            letter-spacing: -0.5px;
        }

        /* Filters (Pills) */
        .filters-container {
            padding: 5px 20px 15px 20px;
            overflow-x: auto;
            white-space: nowrap;
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .filters-container::-webkit-scrollbar { display: none; }

        .filter-pill {
            display: inline-block;
            padding: 8px 16px;
            margin-right: 8px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            background: rgba(255,255,255,0.4);
            border: 1px solid rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .filter-pill.active {
            background: var(--text-main);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transform: scale(1.02);
        }

        .filter-pill.special {
            background: linear-gradient(135deg, #FF3B30, #FF9500);
            color: white;
            border: none;
        }

        /* Scrollable List */
        .list-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        /* Cards */
        .card {
            background: rgba(255,255,255,0.6);
            border-radius: var(--card-radius);
            padding: 12px;
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .card:hover {
            transform: translateY(-2px);
            background: rgba(255,255,255,0.85);
        }

        .card-img {
            width: 90px;
            height: 90px;
            border-radius: 12px;
            object-fit: cover;
            flex-shrink: 0;
            background-color: #ddd;
        }

        .card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .card-title {
            font-size: 15px;
            font-weight: 600;
            margin: 0;
            line-height: 1.2;
        }

        .card-desc {
            font-size: 12px;
            color: var(--text-sec);
            margin: 4px 0;
            line-height: 1.3;
        }

        .badge-row {
            display: flex;
            gap: 6px;
            margin-top: 4px;
        }

        .badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge.price { background: #E5E5EA; color: #333; }
        .badge.rating { background: #FFD60A; color: #000; }
        
        .golden-tip {
            font-size: 11px;
            color: #854d0e;
            background: #fef9c3;
            padding: 6px;
            border-radius: 8px;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-nav {
            display: inline-block;
            margin-top: 8px;
            text-decoration: none;
            color: var(--primary-blue);
            font-size: 12px;
            font-weight: 600;
        }

        /* Timeline Styles for Roteiro */
        .timeline-container {
            border-left: 2px solid rgba(0,0,0,0.1);
            margin-left: 10px;
            padding-left: 20px;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 25px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 15px;
            width: 10px;
            height: 10px;
            background: var(--primary-blue);
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 3px rgba(0,122,255,0.2);
        }

        .timeline-date {
            font-size: 12px;
            font-weight: 800;
            color: var(--primary-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        /* Map Markers Styling */
        .custom-marker {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            text-align: center;
            font-size: 16px;
            line-height: 30px;
            width: 30px !important;
            height: 30px !important;
            margin-left: -15px !important;
            margin-top: -15px !important;
        }

        /* --- MOBILE LAYOUT --- */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column; /* Mapa em cima, Lista em baixo */
            }

            .map-area {
                height: 40vh; /* 40% da tela */
                flex-grow: 0;
            }

            .content-area {
                width: 100%;
                height: 60vh; /* 60% da tela */
                border-right: none;
                border-top: 1px solid var(--glass-border);
                border-radius: 24px 24px 0 0;
                margin-top: -20px; /* Sobreposi√ß√£o leve no mapa */
                padding-top: 10px;
            }

            /* Handle visual para puxar (est√©tico) */
            .content-area::before {
                content: '';
                display: block;
                width: 40px;
                height: 4px;
                background: rgba(0,0,0,0.2);
                margin: 0 auto 10px auto;
                border-radius: 2px;
            }
        }
    </style>
</head>
<body>

    <div class="mesh-background"></div>

    <div class="app-container">
        
        <div class="map-area">
            <div id="map"></div>
        </div>

        <div class="content-area">
            <div class="header">
                <h1>Roteiro Lagos 24/25</h1>
                <p style="font-size: 12px; opacity: 0.7; margin:0;">Base: Condom√≠nio dos P√°ssaros</p>
            </div>

            <div class="filters-container">
                <div class="filter-pill special" onclick="filterData('roteiro')">üìÖ Roteiro Dia a Dia</div>
                <div class="filter-pill" onclick="filterData('praias')">üèñÔ∏è Praias</div>
                <div class="filter-pill" onclick="filterData('gastronomia')">üç§ Gastronomia</div>
                <div class="filter-pill" onclick="filterData('noite')">üç∏ Noite</div>
                <div class="filter-pill" onclick="filterData('servicos')">üõí Servi√ßos</div>
                <div class="filter-pill" onclick="filterData('fitness')">üí™ Fitness</div>
                <div class="filter-pill" onclick="filterData('saude')">üè• Sa√∫de</div>
            </div>

            <div class="list-container" id="cards-wrapper">
                </div>
        </div>
    </div>

    <script>
        // --- 1. BASE DE DADOS (JSON SIMULADO) ---
        // Coordenadas aproximadas para demonstra√ß√£o
        const db = [
            // ROTEIRO (Itens Especiais)
            { id: 'r1', cat: 'roteiro', date: '27 DEZ', title: 'Chegada & Abastecimento', desc: 'Check-in e mercado pesado.', lat: -22.8475, lng: -41.9980, img: 'https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=150&q=80', tip: 'Mercado Atacad√£o na entrada de CF' },
            { id: 'r2', cat: 'roteiro', date: '28 DEZ', title: 'Ilha do Japon√™s', desc: 'Dia de sol em √°guas calmas.', lat: -22.8689, lng: -41.9967, img: 'https://images.unsplash.com/photo-1596395811365-c3d3dd52b270?auto=format&fit=crop&w=150&q=80', tip: 'V√° de t√°xi boat pelo Bairro da Passagem' },
            { id: 'r3', cat: 'roteiro', date: '29 DEZ', title: 'Sunset no Porto da Barra', desc: 'B√∫zios Lifestyle.', lat: -22.7562, lng: -41.8903, img: 'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?auto=format&fit=crop&w=150&q=80', tip: 'Chegue √†s 16h para pegar mesa no Anexo Bar' },
            { id: 'r4', cat: 'roteiro', date: '31 DEZ', title: 'R√©veillon Praia do Forte', desc: 'Virada cl√°ssica.', lat: -22.8856, lng: -42.0232, img: 'https://images.unsplash.com/photo-1506509939634-1c697c95cb38?auto=format&fit=crop&w=150&q=80', tip: 'Tr√¢nsito para tudo. V√° a p√© se poss√≠vel.' },
            
            // PRAIAS
            { id: 1, cat: 'praias', title: 'Praia do Per√≥', desc: 'Bandeira Azul. Areia limpa e extensa.', lat: -22.8624, lng: -41.9845, rating: '4.8', price: 'Free', img: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=150&q=80', tip: '√ìtima para surf no canto esquerdo' },
            { id: 2, cat: 'praias', title: 'Praia das Conchas', desc: 'Ao lado do Per√≥, √°guas calmas.', lat: -22.8660, lng: -41.9750, rating: '4.9', price: 'Estac. Pago', img: 'https://images.unsplash.com/photo-1520483602335-3b3dd1c50d2e?auto=format&fit=crop&w=150&q=80', tip: 'Quiosques caros, leve cooler' },
            { id: 3, cat: 'praias', title: 'Gerib√° (B√∫zios)', desc: 'A praia da badala√ß√£o jovem.', lat: -22.7758, lng: -41.9056, rating: '4.7', price: '$$$', img: 'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?auto=format&fit=crop&w=150&q=80', tip: 'Fishbone para o p√≥s-praia' },
            { id: 4, cat: 'praias', title: 'Prainhas do Pontal', desc: 'Caribe Brasileiro em Arraial.', lat: -22.9786, lng: -42.0233, rating: '5.0', price: 'Barco', img: 'https://images.unsplash.com/photo-1590001155093-a3c66ab0c3ff?auto=format&fit=crop&w=150&q=80', tip: 'Mar√© baixa de manh√£ √© o ideal' },
            { id: 5, cat: 'praias', title: 'Ferradurinha', desc: 'Pequena e c√™nica em B√∫zios.', lat: -22.7836, lng: -41.9050, rating: '4.6', price: 'Free', img: 'https://images.unsplash.com/photo-1592869508544-77a284e937d3?auto=format&fit=crop&w=150&q=80', tip: 'Alugue caiaque aqui' },

            // GASTRONOMIA
            { id: 6, cat: 'gastronomia', title: 'Picoleto', desc: 'Melhor sorvete da Passagem.', lat: -22.8800, lng: -42.0150, rating: '4.9', price: '$', img: 'https://images.unsplash.com/photo-1497034825429-c343d7c6a68f?auto=format&fit=crop&w=150&q=80', tip: 'Pe√ßa o de Ninho com Trufa' },
            { id: 7, cat: 'gastronomia', title: 'Box 60 (Porto da Barra)', desc: 'Drinks e petiscos premium.', lat: -22.7565, lng: -41.8905, rating: '4.7', price: '$$$$', img: 'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&w=150&q=80', tip: 'P√¥r do sol imbat√≠vel' },
            { id: 8, cat: 'gastronomia', title: 'Jos√© Restaurante', desc: 'Alta gastronomia em Cabo Frio.', lat: -22.8820, lng: -42.0200, rating: '4.8', price: '$$$$', img: 'https://images.unsplash.com/photo-1550966871-3ed3c47e2ce2?auto=format&fit=crop&w=150&q=80', tip: 'Reserve com anteced√™ncia' },
            { id: 9, cat: 'gastronomia', title: 'Creperia Chez Michou', desc: 'Cl√°ssico da Rua das Pedras.', lat: -22.7538, lng: -41.8885, rating: '4.5', price: '$$', img: 'https://images.unsplash.com/photo-1519624027092-2374ef06159c?auto=format&fit=crop&w=150&q=80', tip: 'Sempre lotado, mas a fila anda' },

            // SERVI√áOS & SAUDE
            { id: 10, cat: 'servicos', title: 'Atacad√£o Cabo Frio', desc: 'Compras pesadas.', lat: -22.8550, lng: -42.0100, rating: 'Cheap', price: '$', img: 'https://images.unsplash.com/photo-1583258292688-d0213dc5a3a8?auto=format&fit=crop&w=150&q=80', tip: 'Evite ir entre 18h-20h' },
            { id: 11, cat: 'saude', title: 'Hosp. Santa Izabel', desc: 'Emerg√™ncia Particular.', lat: -22.8790, lng: -42.0180, rating: '24h', price: 'Conv.', img: 'https://images.unsplash.com/photo-1586773860418-d37222d8fce3?auto=format&fit=crop&w=150&q=80', tip: 'Melhor estrutura da regi√£o' },
            { id: 12, cat: 'fitness', title: 'Academia Corpo & Mar', desc: 'Aceita GymPass.', lat: -22.8805, lng: -42.0210, rating: 'GymPass', price: '$$', img: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?auto=format&fit=crop&w=150&q=80', tip: 'Ar condicionado forte' },
            
            // NOITE
            { id: 13, cat: 'noite', title: 'Privil√®ge B√∫zios', desc: 'Balada eletr√¥nica top.', lat: -22.7540, lng: -41.8870, rating: 'Top', price: '$$$$$', img: 'https://images.unsplash.com/photo-1566737236500-c8ac43014a67?auto=format&fit=crop&w=150&q=80', tip: 'Compre ingresso antecipado online' },
        ];

        // --- 2. CONFIGURA√á√ÉO DO MAPA ---
        const baseCoords = [-22.8475, -41.9980]; // Portaria Cond. P√°ssaros
        const map = L.map('map', { zoomControl: false }).setView(baseCoords, 12);
        
        // Mover controles de zoom para canto inferior direito (melhor UX mobile)
        L.control.zoom({ position: 'bottomright' }).addTo(map);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap &copy; CARTO',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // Marcador da Base (Casa)
        const homeIcon = L.divIcon({
            className: 'custom-marker',
            html: '<i class="fas fa-home" style="color: #007AFF; font-size: 14px; line-height: 26px;"></i>',
            iconSize: [30, 30],
            iconAnchor: [15, 15]
        });
        L.marker(baseCoords, {icon: homeIcon}).addTo(map).bindPopup("<b>Base:</b> Cond. dos P√°ssaros");

        // Array para guardar marcadores ativos
        let markers = [];

        // --- 3. L√ìGICA DA APLICA√á√ÉO ---

        const cardsWrapper = document.getElementById('cards-wrapper');
        const filters = document.querySelectorAll('.filter-pill');

        // Fun√ß√£o para gerar link do Google Maps
        function getMapsLink(lat, lng, query) {
            return `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&destination_place_id=${encodeURIComponent(query)}`;
        }

        // Renderiza√ß√£o dos Cards
        function renderCards(data, isTimeline = false) {
            cardsWrapper.innerHTML = '';
            
            // Limpar mapa
            markers.forEach(m => map.removeLayer(m));
            markers = [];

            if(isTimeline) {
                cardsWrapper.innerHTML = `<div class="timeline-container"></div>`;
                const container = cardsWrapper.querySelector('.timeline-container');
                
                data.forEach(item => {
                    // Adicionar ao Mapa
                    addMarkerToMap(item);

                    // Criar HTML Timeline
                    const el = document.createElement('div');
                    el.className = 'timeline-item';
                    el.onclick = () => focusOnMap(item.lat, item.lng);
                    el.innerHTML = `
                        <div class="timeline-date">${item.date}</div>
                        <div class="card" style="margin:0;">
                             <img src="${item.img}" class="card-img" alt="${item.title}" loading="lazy">
                             <div class="card-content">
                                <div class="card-header">
                                    <h3 class="card-title">${item.title}</h3>
                                </div>
                                <p class="card-desc">${item.desc}</p>
                                <div class="golden-tip"><i class="fas fa-lightbulb"></i> ${item.tip}</div>
                                <a href="${getMapsLink(item.lat, item.lng, item.title)}" target="_blank" class="btn-nav" onclick="event.stopPropagation()">
                                    <i class="fas fa-location-arrow"></i> Ir Agora
                                </a>
                             </div>
                        </div>
                    `;
                    container.appendChild(el);
                });
            } else {
                data.forEach(item => {
                    // Adicionar ao Mapa
                    addMarkerToMap(item);

                    // Criar HTML Card Padr√£o
                    const el = document.createElement('div');
                    el.className = 'card';
                    el.onclick = () => focusOnMap(item.lat, item.lng);
                    el.innerHTML = `
                        <img src="${item.img}" class="card-img" alt="${item.title}" loading="lazy">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">${item.title}</h3>
                                <div class="badge-row">
                                    ${item.rating ? `<span class="badge rating">${item.rating}</span>` : ''}
                                    ${item.price ? `<span class="badge price">${item.price}</span>` : ''}
                                </div>
                            </div>
                            <p class="card-desc">${item.desc}</p>
                            ${item.tip ? `<div class="golden-tip"><i class="fas fa-lightbulb"></i> ${item.tip}</div>` : ''}
                            <a href="${getMapsLink(item.lat, item.lng, item.title)}" target="_blank" class="btn-nav" onclick="event.stopPropagation()">
                                <i class="fas fa-location-arrow"></i> Navegar
                            </a>
                        </div>
                    `;
                    cardsWrapper.appendChild(el);
                });
            }
        }

        // Fun√ß√£o auxiliar de mapa
        function addMarkerToMap(item) {
            let iconColor = '#333';
            let iconChar = '<i class="fas fa-map-marker-alt"></i>';
            
            if(item.cat === 'praias') { iconColor = '#007AFF'; iconChar = 'üèñÔ∏è'; }
            if(item.cat === 'gastronomia') { iconColor = '#FF9500'; iconChar = 'üç§'; }
            if(item.cat === 'noite') { iconColor = '#5856D6'; iconChar = 'üç∏'; }
            
            const icon = L.divIcon({
                className: 'custom-marker',
                html: `<span style="font-size:14px">${iconChar}</span>`,
                iconSize: [30, 30]
            });

            const marker = L.marker([item.lat, item.lng], {icon: icon})
                .bindPopup(`<b>${item.title}</b><br>${item.desc}`)
                .addTo(map);
            markers.push(marker);
        }

        // Intera√ß√£o de Foco
        function focusOnMap(lat, lng) {
            // No mobile, faz scroll suave para o mapa
            if(window.innerWidth <= 768) {
               window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            map.flyTo([lat, lng], 15, {
                animate: true,
                duration: 1.5
            });
        }

        // L√≥gica de Filtro
        window.filterData = function(category) {
            // Atualizar UI dos Pills
            filters.forEach(f => f.classList.remove('active'));
            event.target.classList.add('active');

            // Filtrar Dados
            const filtered = db.filter(item => item.cat === category);
            
            // Renderizar (Verificar se √© roteiro para layout especial)
            renderCards(filtered, category === 'roteiro');

            // Ajustar Zoom do mapa para caber todos os pontos
            if(filtered.length > 0) {
                const group = new L.featureGroup(markers);
                map.flyToBounds(group.getBounds().pad(0.1));
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            // Ativa o primeiro filtro automaticamente (Roteiro)
            document.querySelector('.filter-pill.special').click();
        });

    </script>
</body>
</html>